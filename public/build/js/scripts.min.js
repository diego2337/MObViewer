function layoutUpdate(){2==layout?layout=3:3==layout&&(layout=2)}function showValue(){document.getElementById("output1").innerHTML=document.getElementById("multilevelCoarsener").value,document.getElementById("output2").innerHTML=document.getElementById("multilevelCoarsener2").value}function graphUpdate(data){build(data,layout)}function loadGraph(){var xhr=new window.XMLHttpRequest;return xhr.upload.addEventListener("progress",function(evt){if(evt.lengthComputable){evt.loaded,evt.total;$("#WebGL").css("visibility","hidden"),$("#progressBar").css("visibility","visible")}},!1),xhr.addEventListener("progress",function(evt){if(evt.lengthComputable)evt.loaded,evt.total;$("#progressBar").css("visibility","hidden"),$("#WebGL").css("visibility","visible")},!1),xhr}$("#showGraphInfoMinimized").on("click",function(){$("#graphInfoMinimized").css("display","none"),$("#graphInfoCollapsed").css("display","inline")}),$("#showGraphInfoCollapsed").on("click",function(){$("#graphInfoMinimized").css("display","inline"),$("#graphInfoCollapsed").css("display","none")}),$("#showGraphConfigurationMinimized").on("click",function(){$("#graphConfigurationMinimized").css("display","none"),$("#graphConfigurationCollapsed").css("display","inline")}),$("#showGraphConfigurationCollapsed").on("click",function(){$("#graphConfigurationCollapsed").css("display","none"),$("#graphConfigurationMinimized").css("display","inline")}),$("#showMultilevelOptionsMinimized").on("click",function(){$("#multilevelOptionsMinimized").css("display","none"),$("#multilevelOptionsCollapsed").css("display","inline")}),$("#showMultilevelOptionsCollapsed").on("click",function(){$("#multilevelOptionsCollapsed").css("display","none"),$("#multilevelOptionsMinimized").css("display","inline")}),$("#showVertexInfoMinimized").on("click",function(){$("#vertexInfoMinimized").css("display","none"),$("#vertexInfoCollapsed").css("display","inline")}),$("#showVertexInfoCollapsed").on("click",function(){$("#vertexInfoCollapsed").css("display","none"),$("#vertexInfoMinimized").css("display","inline")}),$("#switchLayout").on("click",function(){$.ajax({url:"/switch",type:"POST",success:function(html){layoutUpdate(),graphUpdate(html,layout)},xhr:loadGraph})}),$("#saveImgButton").on("click",function(){capture=!0}),$("#saveFileButton").on("click",function(){$.ajax({url:"/switch",type:"POST",success:function(html){var dataStr="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(html)),dlAnchorElem=document.getElementById("downloadAnchorElem");dlAnchorElem.setAttribute("href",dataStr),dlAnchorElem.setAttribute("download","graph.json"),dlAnchorElem.click()}})}),$("#multilevelCoarsener").on("change",function(){document.getElementById("output1").innerHTML=parseFloat($("#multilevelCoarsener")[0].value),$.ajax({url:"/slide",type:"POST",data:{coarsening:$("#multilevelCoarsener")[0].value,coarseningSecondSet:$("#multilevelCoarsener2")[0].value,firstSet:$("#multilevelCoarsener")[0].value?1:0},success:graphUpdate,xhr:loadGraph})}),$("#multilevelCoarsener2").on("change",function(){document.getElementById("output2").innerHTML=$("#multilevelCoarsener2")[0].value,$.ajax({url:"/slide",type:"POST",data:{coarsening:$("#multilevelCoarsener")[0].value,coarseningSecondSet:$("#multilevelCoarsener2")[0].value,firstSet:$("#multilevelCoarsener")[0].value?1:0},success:graphUpdate,xhr:loadGraph})}),$(".upload-btn").on("click",function(){$("#upload-input").click(),$(".progress-bar").text("0%"),$(".progress-bar").width("0%")}),$("#upload-input").on("change",function(){var files=$(this).get(0).files;if(files.length>0){for(var formData=new FormData,i=0;i<files.length;i++){var file=files[i];formData.append("uploads[]",file,file.name)}$.ajax({url:"/upload",type:"POST",data:formData,processData:!1,contentType:!1,success:function(data){console.log("Upload successful!\n"),showValue(),build(data)},xhr:loadGraph})}});