function layoutUpdate(){2==layout?(layout=3,document.getElementById("panLeft").disabled="disabled",document.getElementById("panRight").disabled="disabled"):3==layout&&(layout=2,document.getElementById("panLeft").disabled="",document.getElementById("panRight").disabled="")}function graphUpdate(data,layout){build(data,layout)}function loadGraph(){var xhr=new window.XMLHttpRequest;return xhr.upload.addEventListener("progress",function(evt){if(evt.lengthComputable){evt.loaded,evt.total;$("#WebGL").css("visibility","hidden"),$("#progressBar").css("visibility","visible")}},!1),xhr.addEventListener("progress",function(evt){if(evt.lengthComputable)evt.loaded,evt.total;$("#progressBar").css("visibility","hidden"),$("#WebGL").css("visibility","visible")},!1),xhr}function getInteger(value){return NaN===parseInt(value)?void 0:parseInt(value)}function showValue(){document.getElementById("output1").innerHTML=document.getElementById("multilevelCoarsener").value,document.getElementById("output2").innerHTML=document.getElementById("multilevelCoarsener2").value}$("#switchLayout").on("click",function(){$.ajax({url:"/switch",type:"POST",success:function(html){layoutUpdate(),graphUpdate(html,layout)},xhr:loadGraph})}),$("#coarseGraph").on("click",function(){$.ajax({url:"/coarse",type:"POST",data:{nLevels:getInteger($("#nLevels")[0].value),coarsening:$("#multilevelCoarsener")[0].value,coarseningSecondSet:$("#multilevelCoarsener2")[0].value,firstSet:0!=$("#multilevelCoarsener")[0].value?1:0},success:function(html){graphUpdate(html,layout)},xhr:loadGraph})}),$("#saveImgButton").on("click",function(){capture=!0}),$("#saveFileButton").on("click",function(){$.ajax({url:"/switch",type:"POST",success:function(html){var dataStr="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(html,void 0,"\t")),dlAnchorElem=document.getElementById("downloadAnchorElem");dlAnchorElem.setAttribute("href",dataStr),dlAnchorElem.setAttribute("download","graph.json"),dlAnchorElem.click()}})}),$(".upload-btn").on("click",function(){$("#upload-input").click(),$(".progress-bar").text("0%"),$(".progress-bar").width("0%")}),$("#upload-input").on("change",function(){var files=$(this).get(0).files;if(files.length>0){for(var formData=new FormData,i=0;i<files.length;i++){var file=files[i];formData.append("uploads[]",file,file.name)}$.ajax({url:"/upload",type:"POST",data:formData,processData:!1,contentType:!1,success:function(data){console.log("Upload successful!\n"),showValue(),build(data)},xhr:loadGraph})}});